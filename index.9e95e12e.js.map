{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-ab8fece1a6f97022.js","js/game/gameView.js","node_modules/@parcel/runtime-js/lib/runtime-8f995fbaeb8e1d8d.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-4b104107b3962508.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"k3gER\\\":\\\"index.9e95e12e.js\\\",\\\"fVoZR\\\":\\\"flag.023f0ba8.svg\\\",\\\"flQIa\\\":\\\"mine.71fdbfa2.svg\\\"}\"));","import { fillZero, parseTime, stringifyCoords } from \"./utils\";\n\nconst flagSrc = new URL(\n\t'/public/img/flag.svg',\n\timport.meta.url,\n);\nconst mineSrc = new URL(\n\t'/public/img/mine.svg?width=22&height=22',\n\timport.meta.url,\n);\n\nclass GameView {\n\n\tgameField;\n\tcurrentMatrix;\n\tnewGameButton;\n\tgameOverButton;\n\tgameTimer;\n\tminesCount;\n\n\n\tconstructor(gameField) {\n\t\tthis.gameField = gameField;\n\t\tthis.currentMatrix = [];\n\n\t\tthis.newGameButton = document.getElementById('start-game');\n\t\tthis.gameOverButton = document.getElementById('game-over');\n\t\tthis.gameWinButton = document.getElementById('game-win');\n\t\tthis.minesCount = document.getElementById('mines-count');\n\t\tthis.gameTimer = document.getElementById('game-timer');\n\t}\n\n\tinit(matrix, minesLeft) {\n\t\tthis.currentMatrix = matrix;\n\t\tGameView.generateGameField(matrix, this.gameField);\n\n\t\tthis.setFlagCount(minesLeft);\n\n\t\tconst listener = () => {\n\t\t\tconst event = new CustomEvent('start-new-game', {\n\t\t\t\tbubbles: true,\n\t\t\t});\n\t\t\tthis.newGameButton.dispatchEvent(event);\n\t\t};\n\n\t\tthis.newGameButton.addEventListener('click', listener);\n\t\tthis.gameOverButton.addEventListener('click', listener);\n\t\tthis.gameWinButton.addEventListener('click', listener);\n\t}\n\n\trender(matrix, minesLeft) {\n\t\tconst { currentMatrix } = this;\n\n\t\tmatrix.forEach((row, i) => {\n\t\t\trow.forEach((value, j) => {\n\t\t\t\tif (currentMatrix[i][j] !== value) {\n\t\t\t\t\tconst id = stringifyCoords(j, i);\n\t\t\t\t\tconst element = document.getElementById(id);\n\n\t\t\t\t\tthis.updateElement(element, value);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.setFlagCount(minesLeft);\n\t\tthis.currentMatrix = matrix;\n\t}\n\n\tupdateElement(element, value) {\n\t\tswitch (value) {\n\t\t\tcase 0: {\n\t\t\t\telement.innerText = '';\n\t\t\t\telement.setAttribute('class', 'game-cell empty-cell');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 1: {\n\t\t\t\telement.setAttribute('class', 'game-cell one');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 2: {\n\t\t\t\telement.setAttribute('class', 'game-cell two');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 3: {\n\t\t\t\telement.setAttribute('class', 'game-cell three');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 10: {\n\t\t\t\telement.innerHTML = '';\n\t\t\t\telement.setAttribute('class', 'game-cell closed-cell');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 11: {\n\t\t\t\tif (element.innerHTML.length) {\n\t\t\t\t\telement.setAttribute('class', 'game-cell background-green');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst mine = GameView.createImage(mineSrc, '');\n\t\t\t\telement.insertAdjacentElement('beforeend', mine);\n\t\t\t\telement.setAttribute('class', 'game-cell background-red');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 12: {\n\t\t\t\tconst flag = GameView.createImage(flagSrc, 'game-flag');\n\t\t\t\telement.insertAdjacentElement('beforeend', flag);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\telement.setAttribute('class', 'game-cell other');\n\t\t\t}\n\t\t}\n\t\tif (value > 0 && value < 10) {\n\t\t\telement.innerText = value;\n\t\t}\n\t}\n\n\tgameOver() {\n\t\tGameView.setStatus(this.gameOverButton, this.newGameButton);\n\t}\n\n\tstartGame() {\n\t\tGameView.setStatus(this.newGameButton, this.gameOverButton, this.gameWinButton);\n\t}\n\n\tfinishGame() {\n\t\tGameView.setStatus(this.gameWinButton, this.newGameButton);\n\t}\n\n\tsetTime(time) {\n\t\tthis.gameTimer.innerText = parseTime(time);\n\t}\n\n\tsetFlagCount(value) {\n\t\tif (value < 0) {\n\t\t\treturn this.minesCount.innerText = '000';\n\t\t}\n\t\tthis.minesCount.innerText = fillZero`000${value}`;\n\t}\n\n\tstatic createImage(src, classes) {\n\t\tconst image = document.createElement('img');\n\t\timage.setAttribute('class', classes);\n\t\timage.setAttribute('src', src);\n\t\treturn image;\n\t}\n\n\tstatic setStatus(elementShow, ...elementsHide) {\n\t\telementsHide.forEach((el) => el.classList.add('d-none'))\n\t\telementShow.classList.remove('d-none');\n\t}\n\n\tstatic createRowComponent() {\n\t\tconst row = document.createElement('div');\n\t\trow.setAttribute('class', 'game-row');\n\t\treturn row;\n\t}\n\n\tstatic createCellComponent(x, y) {\n\t\tconst cell = document.createElement('div');\n\t\tconst id = stringifyCoords(x, y);\n\n\t\tcell.setAttribute('id', id);\n\t\tcell.setAttribute('class', 'game-cell closed-cell');\n\n\t\tcell.addEventListener('click', () => {\n\t\t\tconst customEvent = new CustomEvent('game-field-left-click', {\n\t\t\t\tbubbles: true,\n\t\t\t\tdetail: { x, y },\n\t\t\t});\n\t\t\tcell.dispatchEvent(customEvent);\n\t\t});\n\t\tcell.addEventListener('contextmenu', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst customEvent = new CustomEvent('game-field-right-click', {\n\t\t\t\tbubbles: true,\n\t\t\t\tdetail: { x, y },\n\t\t\t});\n\t\t\tcell.dispatchEvent(customEvent);\n\t\t});\n\n\t\treturn cell;\n\t}\n\n\tstatic generateGameField(matrix, container) {\n\t\tmatrix.forEach((row, i) => {\n\t\t\tconst rowComponent = GameView.createRowComponent();\n\t\t\trow.forEach((_, j) => {\n\t\t\t\tconst cell = GameView.createCellComponent(j, i);\n\t\t\t\trowComponent.insertAdjacentElement('beforeend', cell);\n\t\t\t});\n\t\t\tcontainer.insertAdjacentElement('beforeend', rowComponent);\n\t\t});\n\t}\n\n}\n\nexport default GameView;\n","module.exports = require('./helpers/bundle-url').getBundleURL('k3gER') + require('./helpers/bundle-manifest').resolve(\"fVoZR\");","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('k3gER') + require('./helpers/bundle-manifest').resolve(\"flQIa\");"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$e041578c1b302cfd$var$flagSrc","URL","$e041578c1b302cfd$var$mineSrc","$e041578c1b302cfd$var$GameView","gameField","currentMatrix","newGameButton","gameOverButton","gameTimer","minesCount","this","document","getElementById","gameWinButton","init","matrix","minesLeft","generateGameField","setFlagCount","listener","event","CustomEvent","bubbles","dispatchEvent","addEventListener","render","matrix1","minesLeft1","forEach","row","value","j","$eBuhp","stringifyCoords","element","updateElement","innerText","setAttribute","innerHTML","mine","createImage","insertAdjacentElement","flag","gameOver","setStatus","startGame","finishGame","setTime","time","parseTime","value1","fillZero","src","classes","image","createElement","elementShow","elementsHide","el","classList","add","remove","x","y","cell","customEvent","detail","preventDefault","matrix2","container","rowComponent","createRowComponent","_","createCellComponent","$e041578c1b302cfd$export$2e2bcd8739ae039","module","exports","getBundleURL","resolve","$f29cd6c67ea13581$export$bdfd709ae4826697","$f29cd6c67ea13581$var$bundleURL","$f29cd6c67ea13581$var$getBaseURL","url","replace","err","matches","stack","match","$f29cd6c67ea13581$var$getBundleURL"],"version":3,"file":"index.9e95e12e.js.map"}